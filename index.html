<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BLUOM Search</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <img src="assets/logo.png" alt="BLUOM Logo" id="logo">
  <h1>BLUOM Search</h1>
  <input type="text" class="search-bar" placeholder="Search The Web" oninput="filterApps()">
</header>

<div class="grid" id="appGrid"></div>

<script>
// Load JSON data
let apps = [];
fetch('data/index.json')
  .then(res => res.json())
  .then(data => { apps = data; renderApps(apps); });

// Render apps to grid
function renderApps(appList){
  const grid = document.getElementById('appGrid');
  grid.innerHTML = '';
  const maxRender = 50; // lazy load first 50
  appList.slice(0, maxRender).forEach(app => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${app.img || 'assets/logo.png'}" alt="${app.name}">
      <div>${app.name}</div>
      <div class="tags">${(app.tags||[]).join(', ')}</div>
    `;
    card.onclick = () => window.open(app.url, "_blank");
    grid.appendChild(card);
  });
}

// Search filter
function filterApps(){
  const q = document.querySelector('.search-bar').value.toLowerCase();
  const filtered = apps.filter(app => {
    return app.name.toLowerCase().includes(q) || (app.tags||[]).some(tag => tag.includes(q));
  });
  renderApps(filtered);
}
</script>

</body>
</html>
